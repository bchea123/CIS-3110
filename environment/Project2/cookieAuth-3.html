
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Sign in</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link href="signin.css" rel="stylesheet">
</head>

<body class="text-center">
  <form class="form-signin">
    <img class="mb-4" src="ford_logo.png" alt="ford_logo" width="72" height="72">
    <h1 class="h3 mb-3 font-weight-normal">Please sign in</h1>
    <label for="inputEmail" class="sr-only">Email address</label>
    <input type="email" id="inputEmail" class="form-control" placeholder="Email address" required autofocus>
    <label for="inputPassword" class="sr-only">Password</label>
    <input type="password" id="inputPassword" class="form-control" placeholder="Password" required>
    <div class="checkbox mb-3">
      <label>
        <input type="checkbox" value="remember-me"> Remember me
      </label>
    </div>
    <button class="btn btn-lg btn-primary btn-block" type="button" id="sub">Sign in</button>
    <p class="mt-5 mb-3 text-muted">&copy; 2022</p>
  </form>
  
  <script>
  //step 1. grab the email, password values
  	var ie = document.querySelector('#inputEmail');//allow you guys to refine, test
  	var ip = document.querySelector('#inputPassword');
    var sub = document.getElementById("sub"); //grab the click event from the button
    
    function setCookie(cname, cvalue)
    {
        	//setCookie('authenticated', 'true');
          console.log("entering set cookie routine");
          var d = new Date();
          d.setTime(d.getTime() + (365*24*60*60*1000));
          var expires = "expires=" + d.toGMTString();
          document.cookie = cname + "=" + cvalue + ";" + expires;
          console.log(getCookie(cname));
          movePage();
          console.log("Cookie created!")
    }
  
    function movePage()
    {
      window.location = 'home.html'; //you determine the name of the page where you go next
    }
    //3. once you've set the cookie, 'authenticated', window.locatoin = nextPage.html
    
    function getCookie(cname)
    {
      console.log("Loading get cookie...");
      var name = cname + "=";
      var ca = document.cookie.split(";");
      console.log("Displaying ca: " + ca);
      
      for(var i = 0; i < ca.length; i++)
      {
        var c = ca[i];
        console.log("ca at i " + ca[i]);
        while(c.charAt(0) == ' '){
          c = c.substring(1);
        }
        if(c.indexOf(name == 0))
        {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }
    
    function checkCookie()
    {
      if(ie.value != '')
    	{
      	if(ip.value != '')
      	{
          console.log("Checking for authentication cookies...");
          console.log("IE Value: " + ie.value);
          var user = getCookie("email");
          if(user == ie.value){
            window.alert("Authenticated for user: " + user);
            movePage();
          }
          else{
            console.log("No email cookies found...");
            user=ie.value;
            setCookie("email", user);
            console.log("User: " + user);
          }
        }
        else
      	{
          window.alert('Please enter your email address and password.');
      	}
    	}
    	else
    	{
        window.alert('Please enter your email address and password.');
    	}
    }
    
    sub.addEventListener('click', checkCookie);//add a click event to the checkGuess
  </script>
</body>
</html>